"use strict";(self.webpackChunkfind_the_time_private=self.webpackChunkfind_the_time_private||[]).push([[646],{3077:function(e,t,n){n.d(t,{gT:function(){return s},Lj:function(){return c},yM:function(){return l},oc:function(){return u},mZ:function(){return d},QM:function(){return p},XM:function(){return h},xC:function(){return m}});var r=n(4569),i=n.n(r),a=n(6712),o="".concat(a.N,"/events"),s=function(e){return i().post("".concat(o),e)},c=function(e){return i().get("".concat(o),{params:{event_id:e}})},l=function(e){return i().post("".concat(o,"/new"),e)},u=function(e,t){return i().post("".concat(o,"/subscribe"),t,{params:{event_id:e}})},d=function(e){return i().post("".concat(o,"/unsubscribe"),{},{params:{event_id:e}})},p=function(e,t){return i().post("".concat(o,"/choose-interval"),t,{params:{event_id:e}})},h=function(e,t){return i().post("".concat(o,"/remove-subscription"),{},{params:{event_id:e,user_id:t}})},m=function(e){return i().post("".concat(o,"/remove"),{},{params:{event_id:e}})}},2048:function(e,t,n){n.d(t,{lR:function(){return a},XO:function(){return s},Rg:function(){return c}});var r=n(7892),i=n.n(r),a=function(e){return null===e?"notYetScheduled":e.end.isAfter(i()())?"pending":"past"},o={notYetScheduled:"EditCalendar",pending:"Event",past:"EventAvailable"},s=function(e){return o[e]},c=function(e,t){return e.organizedBy.id===t.id?"organizer":e.subscriptions.some((function(e){return e.user.id===t.id}))?"subscriber":"visitor"}},5646:function(e,t,n){n.r(t),n.d(t,{default:function(){return ae}});var r=n(5987),i=n(1413),a=n(9448),o=n.n(a),s=n(6871),c=n(2791),l=n(1253),u=n(7993),d=n(528),p=n(6278),h=n(9331),m=n(3960),f=n(3527),_=n(7892),g=n.n(_),v=n(7838),Z=n(4833),x=n(5446),j=n(2189),I=n(2048),y={Root:"EventTile_Root__kjvQ+",Heading:"EventTile_Heading__ewzJ9",SeparatorContainer:"EventTile_SeparatorContainer__VYmbU",List:"EventTile_List__WNImg",ListItem:"EventTile_ListItem__vAa6f",ListItem_color_default:"EventTile_ListItem_color_default__Zklcf",ListItem_color_accentPrimary:"EventTile_ListItem_color_accentPrimary__1p0Qy",ListItem_color_accentSecondary:"EventTile_ListItem_color_accentSecondary__4A8S6",ListItem_color_faded:"EventTile_ListItem_color_faded__EOlie",ListItemIconContainer:"EventTile_ListItemIconContainer__ITU09",ListItemTextContainer:"EventTile_ListItemTextContainer__GfTOG"},b=n(184),L=o().bind(y),S={notYetScheduled:"accentPrimary",pending:"accentSecondary",past:"faded"},C=function(e){var t=e.icon,n=e.color,r=void 0===n?"default":n,i=e.children;return(0,b.jsxs)("li",{className:L("ListItem","ListItem_color_".concat(r)),children:[(0,b.jsx)("div",{className:y.ListItemIconContainer,children:(0,b.jsx)(x.Z,{isCentered:!1,type:t})}),(0,b.jsx)("p",{className:y.ListItemTextContainer,children:i})]})},N=function(e){var t=e.title,n=e.organizedBy,r=e.created,i=e.location,a=e.comment,o=e.duration,s=e.chosenInterval,c=(0,I.lR)(s);return(0,b.jsxs)("article",{className:y.Root,children:[(0,b.jsx)("h3",{className:y.Heading,children:(0,b.jsx)(v.Z,{clamp:1,font:"primaryBold",color:"secondary",children:t})}),(0,b.jsxs)("ul",{className:y.List,children:[(0,b.jsxs)(C,{icon:"Person",children:[(0,b.jsx)(v.Z,{clamp:1,children:(0,j.G)(n)}),(0,b.jsx)("br",{}),(0,b.jsxs)(v.Z,{font:"primaryItalic",size:"small",children:["created ",g()(r).fromNow()]})]}),(0,b.jsx)(C,{icon:"LocationOn",children:(0,b.jsx)(v.Z,{clamp:1,children:i})}),(0,b.jsx)(C,{icon:"Description",children:""!==a?(0,b.jsx)(v.Z,{clamp:3,children:a}):(0,b.jsx)(v.Z,{font:"primaryItalic",children:"No description"})})]}),(0,b.jsx)("div",{className:y.SeparatorContainer,children:(0,b.jsx)(Z.Z,{theme:"default"})}),(0,b.jsxs)("ul",{className:y.List,children:[(0,b.jsx)(C,{icon:"Timelapse",children:(0,b.jsx)(v.Z,{children:"".concat("past"===c?"Lasted":"Will last"," ").concat(g().duration(o,"minutes").humanize())})}),(0,b.jsxs)(C,{icon:(0,I.XO)(c),color:S[c],children:["notYetScheduled"===c&&(0,b.jsx)(v.Z,{color:"inherit",children:"Not scheduled yet"}),"pending"===c&&s&&(0,b.jsxs)(v.Z,{color:"inherit",children:["Scheduled for ",s.start.format("MMM D")]}),"past"===c&&s&&(0,b.jsxs)(v.Z,{color:"inherit",children:["Ended ",s.end.fromNow()]})]})]})]})},k=n(3155),T=n(1290),w=n(1556),E={Root:"Switch_Root__8C98f",Input:"Switch_Input__8hKuq",Track:"Switch_Track__mxs1G",Track_checked:"Switch_Track_checked__6TuZE",Container:"Switch_Container__QAlzR"},P=["label","labelPosition","checked"],R=o().bind(E),z=function(e){var t=e.label,n=e.labelPosition,a=void 0===n?"left":n,o=e.checked,s=(0,r.Z)(e,P),c=(0,b.jsx)("label",{className:E.Root,children:(0,b.jsx)("div",{className:R("Track",{Track_checked:o}),children:(0,b.jsx)("input",(0,i.Z)({className:E.Input,type:"checkbox",checked:o},s))})});return t?(0,b.jsxs)("label",{className:E.Container,children:["left"===a&&(0,b.jsx)(v.Z,{color:"inherit",children:t}),c,"right"===a&&(0,b.jsx)(v.Z,{color:"inherit",children:t})]}):c},O=n(2754),B=function(e){var t=e.filter,n=e.onFilterChange,r=(0,O.Z)()("Mobile","Tablet")?"right":"center",i=function(e){return e||"all"},a=function(e,r){return(0,b.jsx)(w.Z.Item,{id:i(e),icon:"Check",iconIsShownOnlyIfSelected:!0,element:"HTMLButton",elementProps:{onClick:function(){e!==t.status&&n({status:e})}},children:r})},o=[t.isOrganizer,t.status].some((function(e){return null!==e}));return(0,b.jsxs)(k.Z,{align:r,width:"wide",closeOnClick:!1,trigger:(0,b.jsx)(T.Z,{icon:"FilterList",isHighlighted:o,elementProps:{title:"Filters"}}),children:[(0,b.jsxs)(w.Z,{selectedId:i(t.status),children:[a(null,"Show all"),a("pending","Pending"),a("past","Past")]}),(0,b.jsx)(Z.Z,{theme:"dropdown"}),(0,b.jsx)(z,{label:"Hide created by others",checked:null!==t.isOrganizer,onChange:function(e){return n({isOrganizer:e.target.checked||null})}})]})},M=n(763),F=n(7508),A="SearchInput_Root__IO2ud",H=function(e){var t=e.filter,n=e.onFilterChange,r=(0,c.useMemo)((function(){return(0,M.debounce)((function(e){e.target.value!==t.title&&n({title:e.target.value})}),600)}),[t.title,n]);return(0,b.jsx)("div",{className:A,children:(0,b.jsx)(F.Z,{theme:"alternative",icon:"Search",placeholder:"Enter event name",onChange:r})})},Y=function(e){var t=e.sorter,n=e.onSorterChange,r=(0,O.Z)()("Mobile","Tablet")?"right":"center",i=function(e,r){return(0,b.jsx)(w.Z.Item,{id:e,icon:"Check",iconIsShownOnlyIfSelected:!0,element:"HTMLButton",elementProps:{onClick:function(){e!==t.sortBy&&n({sortBy:e})}},children:r})};return(0,b.jsx)(k.Z,{align:r,trigger:(0,b.jsx)(T.Z,{icon:"SortByAlpha",isHighlighted:"created"!==t.sortBy,elementProps:{title:"Sort by"}}),children:(0,b.jsxs)(w.Z,{selectedId:t.sortBy,children:[i("created","Created on"),i("chosenInterval","Scheduled for"),i("subscriptions","Possible start")]})})},G=function(e){var t=e.sorter,n=e.onSorterChange,r="descending"===t.direction?"ArrowDownward":"ArrowUpward",i="descending"===t.direction?"ascending":"descending";return(0,b.jsx)(T.Z,{icon:r,elementProps:{onClick:function(){return n({direction:i})},title:"Sort direction"}})},Q={Controls:"Events_Controls__4R+MV",List:"Events_List__z3wNT",ListItem:"Events_ListItem__iqSBL",ListItem_loader:"Events_ListItem_loader__r4ucv"},D=n(5861),U=n(9439),W=n(7757),X=n.n(W),q=n(5469),V=n(3077),J=n(6579),K=n(3433),$=n(7707),ee=["chosenInterval"],te=function(e,t){switch(t.type){case"pickNextPage":var n=(e.pagination.pageNumber+1)*e.pageSize;if(null!==e.totalItems&&n<e.totalItems){var a=e.pagination.pageNumber+1;return(0,i.Z)((0,i.Z)({},e),{},{pagination:(0,i.Z)((0,i.Z)({},e.pagination),{},{pageNumber:a})})}return(0,i.Z)({},e);case"applyFilter":return(0,i.Z)((0,i.Z)({},e),{},{pagination:(0,i.Z)((0,i.Z)({},e.pagination),{},{pageNumber:0}),totalItems:null,filter:(0,i.Z)((0,i.Z)({},e.filter),t.payload)});case"applySorter":return(0,i.Z)((0,i.Z)({},e),{},{pagination:(0,i.Z)((0,i.Z)({},e.pagination),{},{pageNumber:0}),totalItems:null,sorter:(0,i.Z)((0,i.Z)({},e.sorter),t.payload)});case"parseResponse":var o=t.payload.items.map((function(e){var t=e.chosenInterval,n=(0,r.Z)(e,ee);return(0,i.Z)({chosenInterval:t?(0,$.c)(t):null},n)}));return(0,i.Z)((0,i.Z)({},e),{},{totalItems:t.payload.totalItems,items:0===e.pagination.pageNumber?(0,K.Z)(o):[].concat((0,K.Z)(e.items),(0,K.Z)(o))});case"setIsLoading":return(0,i.Z)((0,i.Z)({},e),{},{isLoading:t.payload})}},ne=function(e){var t=(0,J.T)(),n={pagination:{pageSize:e,pageNumber:0},sorter:{sortBy:"created",direction:"descending"},filter:{isOrganizer:null,location:null,status:null,title:null},items:[],totalItems:null,pageSize:e,isLoading:!1},r=(0,c.useReducer)(te,n),a=(0,U.Z)(r,2),o=a[0],s=a[1],l=function(e){return s({type:"parseResponse",payload:e})},u=function(e){return s({type:"setIsLoading",payload:e})};return(0,c.useEffect)((function(){var e=function(){var e=(0,D.Z)(X().mark((function e(){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),n={pagination:o.pagination,filter:o.filter,sorter:o.sorter},e.prev=2,e.next=5,(0,V.gT)(n);case 5:r=e.sent,l(r.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t((0,q.H_)("fetch your events",e.t0));case 12:u(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[o.pagination,o.filter,o.sorter,t]),(0,i.Z)((0,i.Z)({},o),{},{getNextPage:function(){return s({type:"pickNextPage"})},applyFilter:function(e){return s({type:"applyFilter",payload:e})},applySorter:function(e){return s({type:"applySorter",payload:e})}})},re=["id"],ie=o().bind(Q),ae=function(){var e=ne(10),t={filter:e.filter,onFilterChange:e.applyFilter},n={sorter:e.sorter,onSorterChange:e.applySorter},a=(0,m.Z)(e.getNextPage).setSentinelRef,o=e.isLoading&&0===e.pagination.pageNumber,_=e.isLoading&&e.pagination.pageNumber>0;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(l.Z,{isOpen:!0}),children:(0,b.jsx)(s.j3,{})}),(0,b.jsxs)(h.Z,{title:"Events",headerAddon:(0,b.jsx)(u.Z,{element:"Link",elementProps:{type:"RouterLink",to:f.Su.CreateEvent},children:"Create new event"}),isLoading:o,children:[(0,b.jsxs)("div",{className:Q.Controls,children:[(0,b.jsx)(H,(0,i.Z)({},t)),(0,b.jsx)(G,(0,i.Z)({},n)),(0,b.jsx)(Y,(0,i.Z)({},n)),(0,b.jsx)(B,(0,i.Z)({},t))]}),(0,b.jsxs)("ul",{className:Q.List,children:[e.items.map((function(t,n){var o=t.id,s=(0,r.Z)(t,re),c=e.items.length-1===n;return(0,b.jsx)("li",{className:Q.ListItem,ref:c?a:void 0,children:(0,b.jsx)(d.Z,{type:"RouterLink",to:"".concat(f.Su.Events,"/").concat(o),isWrapper:!0,children:(0,b.jsx)(N,(0,i.Z)({id:o},s))})},o)})),_&&(0,b.jsx)(p.Z,{isShown:!0,children:(0,b.jsx)("li",{className:ie("ListItem","ListItem_loader")})})]})]})]})}},7707:function(e,t,n){n.d(t,{c:function(){return c},n:function(){return l}});var r=n(1413),i=n(5987),a=n(7892),o=n.n(a),s=["subscriptions","chosenInterval"],c=function(e){var t=e.start,n=e.end;return{start:o()(t),end:o()(n)}},l=function(e){var t=e.subscriptions,n=e.chosenInterval,a=(0,i.Z)(e,s),o=t.map((function(e){return{user:e.user,availability:e.availability.map((function(e){return c(e)}))}})),l=n?c(n):null;return(0,r.Z)({subscriptions:o,chosenInterval:l},a)}}}]);
//# sourceMappingURL=646.afcb3dcb.chunk.js.map