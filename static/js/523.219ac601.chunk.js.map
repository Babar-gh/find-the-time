{"version":3,"file":"static/js/523.219ac601.chunk.js","mappings":"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","sources":["api/events.ts","helpers/events.ts","components/Subscriptions/constants.ts","components/Subscriptions/helpers.tsx","webpack://find-the-time-private/./src/components/Subscriptions/components/Interval/Interval.module.scss?a761","components/Subscriptions/components/Interval/Interval.tsx","webpack://find-the-time-private/./src/components/Subscriptions/Subscriptions.module.scss?01da","webpack://find-the-time-private/./src/components/Subscriptions/components/User/User.module.scss?1d93","components/Subscriptions/components/User/User.tsx","components/Subscriptions/Subscriptions.tsx","components/ConfirmationModal/ConfirmationModal.tsx","types/converters/toApiTypes.ts","pages/private/EventDetails/components/Comment/Comment.tsx","pages/private/EventDetails/components/Duration/Duration.tsx","pages/private/EventDetails/components/IntervalChoiceModal/IntervalChoiceModal.tsx","pages/private/EventDetails/components/Location/Location.tsx","pages/private/EventDetails/components/OrganizedBy/OrganizedBy.tsx","pages/private/EventDetails/components/ShareModal/ShareModal.tsx","pages/private/EventDetails/components/Status/helpers.tsx","pages/private/EventDetails/components/Status/Status.tsx","webpack://find-the-time-private/./src/pages/private/EventDetails/EventDetails.module.scss?8ce4","pages/private/EventDetails/components/VisitorAvailabilityModal/constraints.ts","pages/private/EventDetails/components/VisitorAvailabilityModal/VisitorAvailabilityModal.tsx","pages/private/EventDetails/components/VisitorAvailabilityModal/helpers.ts","pages/private/EventDetails/EventDetails.tsx","types/converters/toClientTypes.ts","ui-kit/DatePicker/DatePicker.tsx"],"sourcesContent":["import axios from 'axios';\r\nimport { Guid } from 'types/common';\r\nimport { API_ROOT_PATH } from './constants/path';\r\nimport {\r\n  IEventSearchRequest,\r\n  IEventSearchResponse,\r\n  IEventDetailsResponse,\r\n  IEventCreationRequest,\r\n  IEventCreationResponse,\r\n  IEventSubscriptionRequest,\r\n  IEventIntervalChoiceRequest,\r\n} from './types/events';\r\n\r\nconst baseUrl = `${API_ROOT_PATH}/events`;\r\n\r\nexport const searchEvents = (constraints: IEventSearchRequest) =>\r\n  axios.post<IEventSearchResponse>(`${baseUrl}`, constraints);\r\n\r\nexport const getEventDetails = (id: Guid) =>\r\n  axios.get<IEventDetailsResponse>(`${baseUrl}`, {\r\n    params: {\r\n      event_id: id,\r\n    },\r\n  });\r\n\r\nexport const createEvent = (details: IEventCreationRequest) =>\r\n  axios.post<IEventCreationResponse>(`${baseUrl}/new`, details);\r\n\r\nexport const subscribeToEvent = (\r\n  id: Guid,\r\n  intervals: IEventSubscriptionRequest\r\n) =>\r\n  axios.post<void>(`${baseUrl}/subscribe`, intervals, {\r\n    params: {\r\n      event_id: id,\r\n    },\r\n  });\r\n\r\nexport const unsubscribeFromEvent = (id: Guid) =>\r\n  axios.post<void>(\r\n    `${baseUrl}/unsubscribe`,\r\n    {},\r\n    {\r\n      params: {\r\n        event_id: id,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const chooseEventInterval = (\r\n  id: Guid,\r\n  interval: IEventIntervalChoiceRequest\r\n) =>\r\n  axios.post<void>(`${baseUrl}/choose-interval`, interval, {\r\n    params: {\r\n      event_id: id,\r\n    },\r\n  });\r\n\r\nexport const removeUserFromEvent = (eventId: Guid, userId: Guid) =>\r\n  axios.post<void>(\r\n    `${baseUrl}/remove-subscription`,\r\n    {},\r\n    {\r\n      params: {\r\n        event_id: eventId,\r\n        user_id: userId,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const removeEvent = (id: Guid) =>\r\n  axios.post<void>(\r\n    `${baseUrl}/remove`,\r\n    {},\r\n    {\r\n      params: {\r\n        event_id: id,\r\n      },\r\n    }\r\n  );\r\n","import dayjs from 'dayjs';\r\nimport { ComponentProps } from 'react';\r\nimport Icon from 'ui-kit/Icon';\r\nimport { IEvent, Role, Status } from 'types/events';\r\nimport { IState } from 'store/slices/account/account';\r\n\r\nexport const getStatus = (chosenInterval: IEvent['chosenInterval']): Status => {\r\n  if (chosenInterval === null) {\r\n    return 'notYetScheduled';\r\n  }\r\n\r\n  return chosenInterval.end.isAfter(dayjs()) ? 'pending' : 'past';\r\n};\r\n\r\ntype MappedIcons = { [Key in Status]: ComponentProps<typeof Icon>['type'] };\r\nconst iconsMappedToStatus: MappedIcons = {\r\n  notYetScheduled: 'EditCalendar',\r\n  pending: 'Event',\r\n  past: 'EventAvailable',\r\n};\r\n\r\nexport const getStatusIcon = (status: Status) => iconsMappedToStatus[status];\r\n\r\nexport const getUserRole = (event: IEvent, account: IState): Role => {\r\n  if (event.organizedBy.id === account.id) {\r\n    return 'organizer';\r\n  }\r\n\r\n  if (event.subscriptions.some((entry) => entry.user.id === account.id)) {\r\n    return 'subscriber';\r\n  }\r\n\r\n  return 'visitor';\r\n};\r\n","import { Guid } from 'types/common';\r\n\r\nexport const ALL_PARTICIPANTS_ID = 'ALL_PARTICIPANTS' as Guid;\r\nexport const SCHEDULED_FOR_ID = 'SCHEDULED_FOR' as Guid;\r\n","import { Dayjs } from 'dayjs';\r\nimport Text from 'components/Text';\r\nimport { DATE_SHORT, TIME_DEFAULT } from 'constants/formats';\r\nimport { getIntersection } from 'utilities/intervals';\r\nimport { IEvent, Subscription } from 'types/events';\r\nimport { ALL_PARTICIPANTS_ID, SCHEDULED_FOR_ID } from './constants';\r\n\r\nexport const getConstraintText = (constraint: Dayjs, isSmall?: boolean) => {\r\n  const size = isSmall ? 'small' : 'regular';\r\n\r\n  return (\r\n    <>\r\n      <Text size={size}>{constraint.format(DATE_SHORT)}</Text>\r\n      <Text size={size}>{constraint.format(TIME_DEFAULT)}</Text>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const addIntersections = (\r\n  participants: Subscription[],\r\n  visitor?: Subscription\r\n): Subscription[] => {\r\n  const withVisitor = visitor?.availability.length\r\n    ? [...participants, visitor]\r\n    : participants;\r\n\r\n  const availabilities = withVisitor.map(\r\n    (subscription) => subscription.availability\r\n  );\r\n\r\n  const intersections = availabilities.reduce(\r\n    (foundIntersections, intervalsToCheck) => {\r\n      return intervalsToCheck.flatMap((current) => {\r\n        return foundIntersections.flatMap((previous) => {\r\n          const newIntersection = getIntersection(previous, current);\r\n\r\n          return newIntersection !== null ? [newIntersection] : [];\r\n        });\r\n      });\r\n    }\r\n  );\r\n\r\n  return [\r\n    ...withVisitor,\r\n    {\r\n      user: { name: 'All participants', email: '', id: ALL_PARTICIPANTS_ID },\r\n      availability: intersections,\r\n    },\r\n  ];\r\n};\r\n\r\nexport const addScheduledFor = (\r\n  rows: Subscription[],\r\n  scheduledFor: IEvent['chosenInterval']\r\n): Subscription[] => {\r\n  if (!scheduledFor) {\r\n    return rows;\r\n  }\r\n\r\n  return [\r\n    ...rows,\r\n    {\r\n      user: { name: 'Scheduled for', email: '', id: SCHEDULED_FOR_ID },\r\n      availability: [scheduledFor],\r\n    },\r\n  ];\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"Root\":\"Interval_Root__8spB2\",\"Root_color_participant\":\"Interval_Root_color_participant__YTabp\",\"Root_color_currentUser\":\"Interval_Root_color_currentUser__4G+OQ\",\"Root_color_allParticipants\":\"Interval_Root_color_allParticipants__SaxRf\",\"Root_color_scheduledFor\":\"Interval_Root_color_scheduledFor__fFl8T\",\"Root_picked\":\"Interval_Root_picked__w1UZ9\",\"Details\":\"Interval_Details__VpV7A\",\"Details_shown\":\"Interval_Details_shown__p66xr\",\"Start\":\"Interval_Start__MHPim\",\"End\":\"Interval_End__cbWfa\",\"RangeHighlight\":\"Interval_RangeHighlight__BmQlk\",\"RangeHighlight_shown\":\"Interval_RangeHighlight_shown__GgXMU\",\"IntervalChoiceButtonContainer\":\"Interval_IntervalChoiceButtonContainer__Tfka+\"};","import classNames from 'classnames/bind';\r\nimport { useState } from 'react';\r\nimport IconButton from 'ui-kit/IconButton';\r\nimport { getConstraintText } from 'components/Subscriptions/helpers';\r\nimport { TimeInterval } from 'types/common';\r\nimport { Rows } from '../../types';\r\nimport styles from './Interval.module.scss';\r\n\r\ninterface IProps {\r\n  interval: TimeInterval;\r\n  column: TimeInterval;\r\n  rows: Rows;\r\n  isCurrentUser: boolean;\r\n  isAllParticipants: boolean;\r\n  isScheduledFor: boolean;\r\n  onIntervalChoice?: (interval: TimeInterval) => void;\r\n}\r\n\r\nconst ROW_HEIGHT = 58;\r\n\r\nconst cn = classNames.bind(styles);\r\n\r\nconst Interval: React.VFC<IProps> = ({\r\n  interval,\r\n  column,\r\n  rows,\r\n  isCurrentUser,\r\n  isAllParticipants,\r\n  isScheduledFor,\r\n  onIntervalChoice,\r\n}) => {\r\n  const [isPicked, setIsPicked] = useState(false);\r\n\r\n  const { start, end } = interval;\r\n  const { start: min, end: max } = column;\r\n\r\n  const minToMaxDuration = max.diff(min);\r\n\r\n  const beforePercent = (start.diff(min) / minToMaxDuration) * 100;\r\n  const durationPercent = (end.diff(start) / minToMaxDuration) * 100;\r\n\r\n  return (\r\n    <div\r\n      className={cn('Root', {\r\n        Root_picked: isPicked,\r\n        Root_color_participant:\r\n          !isCurrentUser && !isAllParticipants && !isScheduledFor,\r\n        Root_color_currentUser: isCurrentUser,\r\n        Root_color_allParticipants: isAllParticipants,\r\n        Root_color_scheduledFor: isScheduledFor,\r\n      })}\r\n      style={{\r\n        left: `${beforePercent}%`,\r\n        width: `${durationPercent}%`,\r\n      }}\r\n      onMouseEnter={() => setIsPicked(true)}\r\n      onMouseLeave={() => setIsPicked(false)}\r\n    >\r\n      {isAllParticipants && onIntervalChoice && (\r\n        <div className={styles['IntervalChoiceButtonContainer']}>\r\n          <IconButton\r\n            icon=\"EditCalendar\"\r\n            elementProps={{ onClick: () => onIntervalChoice(interval) }}\r\n          />\r\n        </div>\r\n      )}\r\n      <div className={cn('Details', { Details_shown: isPicked })}>\r\n        <div className={styles['Start']}>{getConstraintText(start, true)}</div>\r\n        <div className={styles['End']}>{getConstraintText(end, true)}</div>\r\n      </div>\r\n      <div\r\n        className={cn('RangeHighlight', { RangeHighlight_shown: isPicked })}\r\n        style={{\r\n          top: `-${ROW_HEIGHT * (rows.current + 1)}px`,\r\n          height: `${ROW_HEIGHT * (rows.total + 1)}px`,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Interval;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"Root\":\"Subscriptions_Root__S+z23\",\"UserList\":\"Subscriptions_UserList__95xQC\",\"IntervalList\":\"Subscriptions_IntervalList__8+5JC\",\"Min\":\"Subscriptions_Min__8hfhR\",\"Max\":\"Subscriptions_Max__7CaG8\",\"IntervalHeader\":\"Subscriptions_IntervalHeader__o8Vlp\",\"UserIntervals\":\"Subscriptions_UserIntervals__Ip4R9\",\"AvailabilityPickButtonContainer\":\"Subscriptions_AvailabilityPickButtonContainer__AP4+t\"};","// extracted by mini-css-extract-plugin\nexport default {\"Root\":\"User_Root__976IA\",\"Name\":\"User_Name__51agT\"};","import Text from 'components/Text';\r\nimport { getDisplayName } from 'helpers/users';\r\nimport { IUser } from 'types/users';\r\nimport IconButton from 'ui-kit/IconButton';\r\nimport styles from './User.module.scss';\r\n\r\ninterface IProps {\r\n  user: IUser;\r\n  isCurrent: boolean;\r\n  isOrganizer: boolean;\r\n  isAllParticipants: boolean;\r\n  isScheduledFor: boolean;\r\n  onRemoval?: (user: IUser) => void;\r\n}\r\n\r\nconst User: React.VFC<IProps> = ({\r\n  user,\r\n  isCurrent,\r\n  isOrganizer,\r\n  isAllParticipants,\r\n  isScheduledFor,\r\n  onRemoval,\r\n}) => {\r\n  const removalButtonIsShown =\r\n    onRemoval && !isOrganizer && !isAllParticipants && !isScheduledFor;\r\n\r\n  const displayName = getDisplayName(user);\r\n\r\n  return (\r\n    <div className={styles['Root']}>\r\n      <p className={styles['Name']} title={displayName}>\r\n        <Text\r\n          font={isCurrent ? 'primaryBold' : 'primary'}\r\n          color={isCurrent ? 'secondary' : 'primary'}\r\n          clamp={1}\r\n        >\r\n          {displayName}\r\n        </Text>\r\n      </p>\r\n      {removalButtonIsShown && (\r\n        <IconButton\r\n          icon=\"Close\"\r\n          elementProps={{ onClick: () => onRemoval(user) }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default User;\r\n","import IconButton from 'ui-kit/IconButton';\r\nimport { IUser } from 'types/users';\r\nimport { IEvent, Subscription } from 'types/events';\r\nimport { TimeInterval } from 'types/common';\r\nimport { useAppSelector } from 'store/hooks';\r\nimport Interval from './components/Interval';\r\nimport styles from './Subscriptions.module.scss';\r\nimport User from './components/User';\r\nimport {\r\n  addIntersections,\r\n  addScheduledFor,\r\n  getConstraintText,\r\n} from './helpers';\r\nimport { ALL_PARTICIPANTS_ID, SCHEDULED_FOR_ID } from './constants';\r\n\r\ninterface IProps {\r\n  participants: Subscription[];\r\n  scheduledFor: IEvent['chosenInterval'];\r\n  visitor?: Subscription;\r\n  onUserRemoval?: (user: IUser) => void;\r\n  onIntervalChoice?: (interval: TimeInterval) => void;\r\n  onAvailabilityPick?: (constrains: TimeInterval) => void;\r\n}\r\n\r\nconst Subscriptions: React.VFC<IProps> = ({\r\n  participants,\r\n  scheduledFor,\r\n  visitor,\r\n  onUserRemoval,\r\n  onIntervalChoice,\r\n  onAvailabilityPick,\r\n}) => {\r\n  const account = useAppSelector((store) => store.account);\r\n\r\n  const withIntersections = addIntersections(participants, visitor);\r\n  const list = addScheduledFor(withIntersections, scheduledFor);\r\n\r\n  return (\r\n    <div className={styles['Root']}>\r\n      <div className={styles['UserList']}>\r\n        {list.map(({ user }, userIndex) => (\r\n          <User\r\n            key={userIndex}\r\n            user={user}\r\n            isCurrent={user.id === account.id}\r\n            isOrganizer={user.id === list[0].user.id}\r\n            isAllParticipants={user.id === ALL_PARTICIPANTS_ID}\r\n            isScheduledFor={user.id === SCHEDULED_FOR_ID}\r\n            onRemoval={onUserRemoval}\r\n          />\r\n        ))}\r\n      </div>\r\n      {list[0].availability.map(({ start: min, end: max }, columnIndex) => (\r\n        <div\r\n          className={styles['IntervalList']}\r\n          style={{ flexGrow: max.diff(min, 'minutes') }}\r\n          key={columnIndex}\r\n        >\r\n          <div className={styles['IntervalHeader']}>\r\n            <div className={styles['Min']}>{getConstraintText(min)}</div>\r\n            <div className={styles['Max']}>{getConstraintText(max)}</div>\r\n          </div>\r\n          {list.map(({ availability, user }, rowIndex) => (\r\n            <div className={styles['UserIntervals']} key={rowIndex}>\r\n              {availability\r\n                .filter(\r\n                  ({ start, end }) =>\r\n                    start.isSameOrAfter(min) && end.isSameOrBefore(max)\r\n                )\r\n                .map((interval, intervalIndex) => (\r\n                  <Interval\r\n                    key={intervalIndex}\r\n                    interval={interval}\r\n                    column={{ start: min, end: max }}\r\n                    rows={{ current: rowIndex, total: list.length }}\r\n                    isCurrentUser={user.id === account.id}\r\n                    isAllParticipants={user.id === ALL_PARTICIPANTS_ID}\r\n                    isScheduledFor={user.id === SCHEDULED_FOR_ID}\r\n                    onIntervalChoice={onIntervalChoice}\r\n                  />\r\n                ))}\r\n            </div>\r\n          ))}\r\n          {onAvailabilityPick && (\r\n            <div className={styles['AvailabilityPickButtonContainer']}>\r\n              <IconButton\r\n                icon=\"Add\"\r\n                elementProps={{\r\n                  onClick: () => onAvailabilityPick({ start: min, end: max }),\r\n                }}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Subscriptions;\r\n","import Text from 'components/Text';\r\nimport Modal from 'ui-kit/Modal';\r\n\r\ninterface IProps {\r\n  title?: string;\r\n  action: string;\r\n  onConfirm: () => void;\r\n  onCancel: () => void;\r\n  isDangerous?: boolean;\r\n}\r\n\r\nconst ConfirmationModal: React.VFC<IProps> = ({\r\n  title = 'Confirm Action',\r\n  action,\r\n  onConfirm,\r\n  onCancel,\r\n  isDangerous = false,\r\n}) => (\r\n  <Modal\r\n    title={title}\r\n    onOkClick={onConfirm}\r\n    okProps={isDangerous ? { theme: 'danger' } : undefined}\r\n    onCancelClick={onCancel}\r\n  >\r\n    <Text>You are about to {action}. Do you want to proceed?</Text>\r\n  </Modal>\r\n);\r\n\r\nexport default ConfirmationModal;\r\n","import { DATETIME_DEFAULT } from 'constants/formats';\r\nimport { IApiTimeInterval } from 'api/types/events';\r\nimport { TimeInterval } from 'types/common';\r\n\r\nexport const convertToIApiTimeInterval = ({\r\n  start,\r\n  end,\r\n}: TimeInterval): IApiTimeInterval => ({\r\n  start: start.format(DATETIME_DEFAULT),\r\n  end: end.format(DATETIME_DEFAULT),\r\n});\r\n","import Text from 'components/Text';\r\nimport { IEvent } from 'types/events';\r\nimport InfoTile from 'components/InfoTile';\r\n\r\ninterface IProps extends Pick<IEvent, 'comment'> {}\r\n\r\nconst Comment: React.VFC<IProps> = ({ comment }) => (\r\n  <InfoTile heading=\"Comment\" icon=\"Description\">\r\n    {comment === '' ? (\r\n      <Text font=\"primaryItalic\">No additional info provided</Text>\r\n    ) : (\r\n      <Text>{comment}</Text>\r\n    )}\r\n  </InfoTile>\r\n);\r\n\r\nexport default Comment;\r\n","import dayjs from 'dayjs';\r\nimport Text from 'components/Text';\r\nimport { IEvent } from 'types/events';\r\nimport InfoTile from 'components/InfoTile';\r\n\r\ninterface IProps extends Pick<IEvent, 'duration'> {}\r\n\r\nconst Duration: React.VFC<IProps> = ({ duration: totalMinutes }) => {\r\n  const duration = dayjs.duration(totalMinutes, 'minutes');\r\n\r\n  const hours = Math.floor(duration.asHours());\r\n  const minutes = duration.minutes();\r\n\r\n  return (\r\n    <InfoTile heading=\"Duration\" icon=\"Timelapse\">\r\n      {hours > 0 && <Text>{`${hours} hours `}</Text>}\r\n      <Text>{`${minutes} minutes`}</Text>\r\n    </InfoTile>\r\n  );\r\n};\r\n\r\nexport default Duration;\r\n","import { ComponentProps } from 'react';\r\nimport { Dayjs } from 'dayjs';\r\nimport DatePicker from 'ui-kit/DatePicker';\r\nimport Form from 'ui-kit/Form';\r\nimport Input from 'ui-kit/Input';\r\nimport Modal from 'ui-kit/Modal';\r\nimport { DATETIME_PICKER } from 'constants/formats';\r\n\r\ninterface IProps {\r\n  onConfirm: () => Promise<void>;\r\n  onCancel: () => void;\r\n  pickerProps: ComponentProps<typeof DatePicker>;\r\n  eventEnd: Dayjs | null;\r\n}\r\n\r\nconst IntervalChoiceModal: React.VFC<IProps> = ({\r\n  onConfirm,\r\n  onCancel,\r\n  pickerProps,\r\n  eventEnd,\r\n}) => (\r\n  <Modal\r\n    title=\"Choose When Event Happens\"\r\n    onOkClick={onConfirm}\r\n    onCancelClick={onCancel}\r\n  >\r\n    <Form defaultPreventedOnSubmission layout=\"responsive\">\r\n      <Form.Column>\r\n        <Form.Item id=\"start\" label=\"Start\" isRequired>\r\n          <DatePicker {...pickerProps} />\r\n        </Form.Item>\r\n        <Form.Item id=\"end\" label=\"End\">\r\n          <Input placeholder={eventEnd?.format(DATETIME_PICKER)} disabled />\r\n        </Form.Item>\r\n      </Form.Column>\r\n    </Form>\r\n  </Modal>\r\n);\r\n\r\nexport default IntervalChoiceModal;\r\n","import Text from 'components/Text';\r\nimport { IEvent } from 'types/events';\r\nimport InfoTile from 'components/InfoTile';\r\n\r\ninterface IProps extends Pick<IEvent, 'location'> {}\r\n\r\nconst Location: React.VFC<IProps> = ({ location }) => (\r\n  <InfoTile heading=\"Location\" icon=\"LocationOn\">\r\n    <Text>{location}</Text>\r\n  </InfoTile>\r\n);\r\n\r\nexport default Location;\r\n","import Separator from 'ui-kit/Separator';\r\nimport Text from 'components/Text';\r\nimport { getDisplayName } from 'helpers/users';\r\nimport { IEvent } from 'types/events';\r\nimport InfoTile from 'components/InfoTile';\r\n\r\ninterface IProps extends Pick<IEvent, 'organizedBy'> {\r\n  isCurrentUser: boolean;\r\n}\r\n\r\nconst OrganizedBy: React.VFC<IProps> = ({ organizedBy, isCurrentUser }) => (\r\n  <InfoTile heading=\"Organized By\" icon=\"Person\">\r\n    <Text>{getDisplayName(organizedBy)}</Text>\r\n    {isCurrentUser && (\r\n      <>\r\n        <Separator />\r\n        <Text font=\"primaryItalic\" size=\"small\">\r\n          That's you!\r\n        </Text>\r\n      </>\r\n    )}\r\n  </InfoTile>\r\n);\r\n\r\nexport default OrganizedBy;\r\n","import Input from 'ui-kit/Input';\r\nimport Modal from 'ui-kit/Modal';\r\n\r\ninterface IProps {\r\n  onCopy: () => void;\r\n  onCancel: () => void;\r\n}\r\n\r\nconst ShareModal: React.VFC<IProps> = ({ onCopy, onCancel }) => {\r\n  const eventUrl = window.location.href;\r\n\r\n  return (\r\n    <Modal\r\n      title=\"Invite Participants\"\r\n      onOkClick={() => {\r\n        navigator.clipboard.writeText(eventUrl);\r\n        onCopy();\r\n      }}\r\n      okText=\"Copy\"\r\n      onCancelClick={onCancel}\r\n    >\r\n      <Input icon=\"Share\" value={eventUrl} />\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ShareModal;\r\n","import Text from 'components/Text';\r\nimport Separator from 'ui-kit/Separator';\r\n\r\nexport const getStatusInfo = (primary: string, secondary: string) => (\r\n  <>\r\n    <Text>{primary}</Text>\r\n    <Separator />\r\n    <Text font=\"primaryItalic\" size=\"small\">\r\n      {secondary}\r\n    </Text>\r\n  </>\r\n);\r\n","import { getStatusIcon } from 'helpers/events';\r\nimport { IEvent, Role, Status as StatusType } from 'types/events';\r\nimport InfoTile from 'components/InfoTile';\r\nimport { getStatusInfo } from './helpers';\r\n\r\ninterface IProps extends Pick<IEvent, 'chosenInterval'> {\r\n  role: Role;\r\n  status: StatusType;\r\n}\r\n\r\nconst notYetScheduledByRole = {\r\n  organizer: 'You can pick the time when everyone is subscribed!',\r\n  subscriber: 'The organizer will pick the time when everyone is subscribed!',\r\n  visitor: 'You can subscribe!',\r\n};\r\n\r\nconst Status: React.VFC<IProps> = ({ chosenInterval, role, status }) => {\r\n  const info = {\r\n    notYetScheduled: getStatusInfo(\r\n      'Not scheduled yet',\r\n      notYetScheduledByRole[role]\r\n    ),\r\n    pending: getStatusInfo(\r\n      `Scheduled for ${chosenInterval?.start.format('MMM D, YYYY')}`,\r\n      `Will start at ${chosenInterval?.start.format('HH:mm')}`\r\n    ),\r\n    past: getStatusInfo(\r\n      `Was scheduled for ${chosenInterval?.start.format('MMM D, YYYY')}`,\r\n      `Ended ${chosenInterval?.end.fromNow()}`\r\n    ),\r\n  };\r\n\r\n  return (\r\n    <InfoTile heading=\"Status\" icon={getStatusIcon(status)}>\r\n      {info[status]}\r\n    </InfoTile>\r\n  );\r\n};\r\n\r\nexport default Status;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"Tiles\":\"EventDetails_Tiles__pcM-6\",\"Subscriptions\":\"EventDetails_Subscriptions__Qb-TF\",\"Buttons\":\"EventDetails_Buttons__j+QAp\"};","import { ValidationErrors } from 'initValidatejs';\r\n\r\nconst getConstraints = (duration: number) => ({\r\n  start: {\r\n    startIsBeforeEnd: true,\r\n  },\r\n  end: {\r\n    notShorterThan: { duration },\r\n  },\r\n  intervals: {\r\n    noIntersections: true,\r\n  },\r\n});\r\n\r\nexport type VisitorAvailabilityValidation = ValidationErrors<\r\nReturnType<typeof getConstraints>\r\n>;\r\n\r\nexport default getConstraints;\r\n","import validate from 'validate.js';\r\nimport { Dayjs } from 'dayjs';\r\nimport { useState } from 'react';\r\nimport DatePicker from 'ui-kit/DatePicker';\r\nimport ErrorDisplay from 'ui-kit/ErrorDisplay';\r\nimport Form from 'ui-kit/Form';\r\nimport Modal from 'ui-kit/Modal';\r\nimport { TimeInterval } from 'types/common';\r\nimport { getInitialStart } from './helpers';\r\nimport getValidationConstraints, {\r\n  VisitorAvailabilityValidation,\r\n} from './constraints';\r\n\r\ninterface IProps {\r\n  onConfirm: (availabile: TimeInterval) => void;\r\n  onCancel: () => void;\r\n  constraints: TimeInterval;\r\n  currentAvailabilities: TimeInterval[];\r\n  duration: number;\r\n}\r\n\r\nconst VisitorAvailabilityModal: React.VFC<IProps> = ({\r\n  onConfirm,\r\n  onCancel,\r\n  constraints,\r\n  currentAvailabilities,\r\n  duration,\r\n}) => {\r\n  const [start, setStart] = useState<Dayjs | null>(\r\n    getInitialStart(constraints, currentAvailabilities)\r\n  );\r\n  const [end, setEnd] = useState<Dayjs | null>(constraints.end);\r\n\r\n  const pickedInterval = start && end ? { start, end } : null;\r\n\r\n  const validationattributes = {\r\n    start: pickedInterval,\r\n    end: pickedInterval,\r\n    intervals: [...currentAvailabilities, pickedInterval],\r\n  };\r\n\r\n  const errors: VisitorAvailabilityValidation = pickedInterval\r\n    ? validate(validationattributes, getValidationConstraints(duration))\r\n    : undefined;\r\n\r\n  const handleOkClick = () => {\r\n    if (!pickedInterval || errors) {\r\n      return;\r\n    }\r\n\r\n    onConfirm(pickedInterval);\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      title=\"Choose When You're Available\"\r\n      onOkClick={handleOkClick}\r\n      onCancelClick={onCancel}\r\n    >\r\n      <ErrorDisplay isShown={Boolean(errors?.intervals)}>\r\n        {errors?.intervals || ''}\r\n      </ErrorDisplay>\r\n      <Form defaultPreventedOnSubmission layout=\"responsive\">\r\n        <Form.Column>\r\n          <Form.Item\r\n            id=\"start\"\r\n            label=\"Start\"\r\n            errorMessage={errors?.start}\r\n            isRequired\r\n          >\r\n            <DatePicker\r\n              value={start}\r\n              onChange={setStart}\r\n              constraints={constraints}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item id=\"end\" label=\"End\" errorMessage={errors?.end} isRequired>\r\n            <DatePicker\r\n              value={end}\r\n              onChange={setEnd}\r\n              constraints={constraints}\r\n            />\r\n          </Form.Item>\r\n        </Form.Column>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default VisitorAvailabilityModal;\r\n","import { TimeInterval } from 'types/common';\r\n\r\nexport const getInitialStart = (\r\n  constraints: TimeInterval,\r\n  currentAvailabilities: TimeInterval[]\r\n) => {\r\n  const lastPickedInterval = currentAvailabilities.at(-1);\r\n\r\n  if (!lastPickedInterval) {\r\n    return constraints.start;\r\n  }\r\n\r\n  const afterPreviousPick = lastPickedInterval.end.add(1, 'hour');\r\n\r\n  return afterPreviousPick.isBetween(constraints.start, constraints.end)\r\n    ? afterPreviousPick\r\n    : constraints.start;\r\n};\r\n","import { Dayjs } from 'dayjs';\r\nimport { To, useNavigate, useParams } from 'react-router-dom';\r\nimport { ComponentProps, useCallback, useEffect, useState } from 'react';\r\nimport Button from 'ui-kit/Button';\r\nimport Page from 'ui-kit/Page';\r\nimport Scroll from 'ui-kit/Scroll';\r\nimport Subscriptions from 'components/Subscriptions';\r\nimport { DATETIME_DEFAULT } from 'constants/formats';\r\nimport { getStatus, getUserRole } from 'helpers/events';\r\nimport { Guid, TimeInterval } from 'types/common';\r\nimport { IEvent } from 'types/events';\r\nimport { IUser } from 'types/users';\r\nimport { PARAM, PRIVATE } from 'constants/routes';\r\nimport { useAppDispatch, useAppSelector } from 'store/hooks';\r\nimport { notifyOnNetworkError } from 'store/slices/notifications';\r\nimport {\r\n  chooseEventInterval,\r\n  getEventDetails,\r\n  removeEvent,\r\n  removeUserFromEvent,\r\n  subscribeToEvent,\r\n  unsubscribeFromEvent,\r\n} from 'api/events';\r\nimport ConfirmationModal from 'components/ConfirmationModal';\r\nimport InfoTile from 'components/InfoTile';\r\nimport { convertToIEvent } from 'types/converters/toClientTypes';\r\nimport { convertToIApiTimeInterval } from 'types/converters/toApiTypes';\r\nimport { LocationState } from '../NotFound';\r\nimport Comment from './components/Comment';\r\nimport Duration from './components/Duration';\r\nimport IntervalChoiceModal from './components/IntervalChoiceModal';\r\nimport Location from './components/Location';\r\nimport OrganizedBy from './components/OrganizedBy';\r\nimport ShareModal from './components/ShareModal';\r\nimport Status from './components/Status';\r\nimport styles from './EventDetails.module.scss';\r\nimport VisitorAvailabilityModal from './components/VisitorAvailabilityModal/VisitorAvailabilityModal';\r\n\r\ninterface IProps {\r\n  navigateBackTo: To;\r\n}\r\n\r\nconst notFoundPageConfig: LocationState = {\r\n  title: 'Event Not Found',\r\n  message: 'We couldn’t find this event. Sorry about that.',\r\n  returnUrl: PRIVATE.Events,\r\n  returnButtonText: 'Go to events',\r\n};\r\n\r\nconst EventDetails: React.VFC<IProps> = ({ navigateBackTo }) => {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const { eventId } = useParams<PARAM.EventId>();\r\n\r\n  const [details, setDetails] = useState<IEvent>();\r\n  const [isLoading, setIsLoading] = useState<boolean>();\r\n\r\n  const [intervalChoiceModalIsOpen, setIntervalChoiceModalIsOpen] =\r\n    useState(false);\r\n  const [intervalChoiceConstraints, setIntervalChoiceConstraints] =\r\n    useState<TimeInterval>();\r\n  const [eventStart, setEventStart] = useState<Dayjs | null>(null);\r\n  const eventEnd =\r\n    details && eventStart ? eventStart.add(details.duration, 'minutes') : null;\r\n\r\n  const [visitorAvailabilityModalIsOpen, setVisitorAvailabilityModalIsOpen] =\r\n    useState(false);\r\n  const [visitorAvailabilityConstraints, setVisitorAvailabilityConstraints] =\r\n    useState<TimeInterval>();\r\n  const [visitorAvailabilities, setVisitorAvailabilities] = useState<\r\n  TimeInterval[]\r\n  >([]);\r\n\r\n  const [shareModalIsOpen, setShareModalIsOpen] = useState(false);\r\n\r\n  const [confirmationModalProps, setConfirmationModalProps] =\r\n    useState<ComponentProps<typeof ConfirmationModal> | null>(null);\r\n\r\n  const account = useAppSelector((store) => store.account);\r\n\r\n  const role = details ? getUserRole(details, account) : null;\r\n  const status = details ? getStatus(details?.chosenInterval) : null;\r\n\r\n  const fetchDetails = useCallback(async () => {\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const response = await getEventDetails(eventId as Guid);\r\n      const parsed = convertToIEvent(response.data);\r\n\r\n      setDetails(parsed);\r\n\r\n      setIsLoading(false);\r\n    } catch {\r\n      setIsLoading(false);\r\n\r\n      navigate(PRIVATE.NotFound, { state: notFoundPageConfig });\r\n    }\r\n  }, [eventId, navigate]);\r\n\r\n  useEffect(() => {\r\n    fetchDetails();\r\n  }, [fetchDetails]);\r\n\r\n  const handleDeleteConfirmation = async () => {\r\n    setConfirmationModalProps(null);\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      await removeEvent(eventId as Guid);\r\n\r\n      setIsLoading(false);\r\n\r\n      navigate(PRIVATE.Events);\r\n    } catch (error) {\r\n      setIsLoading(false);\r\n\r\n      dispatch(notifyOnNetworkError('delete the event', error));\r\n    }\r\n  };\r\n\r\n  const handleDeleteButtonClick = () =>\r\n    setConfirmationModalProps({\r\n      title: 'Remove Event',\r\n      action: 'remove this event',\r\n      onConfirm: handleDeleteConfirmation,\r\n      onCancel: () => setConfirmationModalProps(null),\r\n    });\r\n\r\n  const removeUser = async (user: IUser) => {\r\n    setConfirmationModalProps(null);\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      await removeUserFromEvent(eventId as Guid, user.id);\r\n\r\n      fetchDetails();\r\n    } catch (error) {\r\n      dispatch(notifyOnNetworkError('remove this user', error));\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUserRemoval = (user: IUser) =>\r\n    setConfirmationModalProps({\r\n      title: 'Remove Participant',\r\n      action: 'remove this user from participation in the event',\r\n      onConfirm: () => removeUser(user),\r\n      onCancel: () => setConfirmationModalProps(null),\r\n    });\r\n\r\n  const handleIntervalChoice = ({ start, end }: TimeInterval) => {\r\n    if (!details) {\r\n      return;\r\n    }\r\n\r\n    const constraints = {\r\n      start,\r\n      end: end.subtract(details.duration, 'minutes'),\r\n    };\r\n\r\n    setIntervalChoiceConstraints(constraints);\r\n    setEventStart(constraints.start);\r\n\r\n    setIntervalChoiceModalIsOpen(true);\r\n  };\r\n\r\n  const handleIntervalChoiceModalConfirm = async () => {\r\n    if (!eventStart || !eventEnd) {\r\n      return;\r\n    }\r\n\r\n    const chosenInterval = {\r\n      start: eventStart.format(DATETIME_DEFAULT),\r\n      end: eventEnd.format(DATETIME_DEFAULT),\r\n    };\r\n\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      await chooseEventInterval(eventId as Guid, { chosenInterval });\r\n\r\n      setIntervalChoiceModalIsOpen(false);\r\n\r\n      fetchDetails();\r\n    } catch (error) {\r\n      dispatch(notifyOnNetworkError('schedule the event', error));\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUnsubscribeConfirmation = async () => {\r\n    setConfirmationModalProps(null);\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      await unsubscribeFromEvent(eventId as Guid);\r\n\r\n      fetchDetails();\r\n    } catch (error) {\r\n      dispatch(notifyOnNetworkError('unsubscribe you', error));\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUnsubscribeButtonClick = () =>\r\n    setConfirmationModalProps({\r\n      title: 'Unsubscribe',\r\n      action: 'revoke your participation in this event',\r\n      onConfirm: handleUnsubscribeConfirmation,\r\n      onCancel: () => setConfirmationModalProps(null),\r\n    });\r\n\r\n  const handleVisitorAvailabilityModalConfirm = (availabile: TimeInterval) => {\r\n    setVisitorAvailabilityModalIsOpen(false);\r\n    setVisitorAvailabilities((current) => [...current, availabile]);\r\n  };\r\n\r\n  const handleSubscribeButtonClick = async () => {\r\n    const availableAt = visitorAvailabilities.map((interval) =>\r\n      convertToIApiTimeInterval(interval)\r\n    );\r\n\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      await subscribeToEvent(eventId as Guid, { availableAt });\r\n\r\n      setVisitorAvailabilities([]);\r\n\r\n      fetchDetails();\r\n    } catch (error) {\r\n      dispatch(notifyOnNetworkError('subscribe you', error));\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAvailabilityPick = (constrains: TimeInterval) => {\r\n    setVisitorAvailabilityConstraints(constrains);\r\n    setVisitorAvailabilityModalIsOpen(true);\r\n  };\r\n\r\n  const handleClearSelectionButtonClick = () => {\r\n    setVisitorAvailabilities([]);\r\n  };\r\n\r\n  const handleShareButtonClick = () => setShareModalIsOpen(true);\r\n\r\n  const subscribeButtonIsShown =\r\n    role === 'visitor' &&\r\n    status === 'notYetScheduled' &&\r\n    Boolean(visitorAvailabilities.length);\r\n\r\n  const clearSelectionButtonIsShown = subscribeButtonIsShown;\r\n\r\n  const unsubscribeButtonIsShown =\r\n    role === 'subscriber' && status === 'notYetScheduled';\r\n\r\n  const deleteButtonIsShown =\r\n    role === 'organizer' && status === 'notYetScheduled';\r\n\r\n  return (\r\n    <Page\r\n      title={details?.title || ''}\r\n      isLoading={isLoading}\r\n      navigateBackTo={navigateBackTo}\r\n      headerAddon={\r\n        <Button\r\n          leftIcon=\"Share\"\r\n          elementProps={{ onClick: handleShareButtonClick }}\r\n        >\r\n          Share\r\n        </Button>\r\n      }\r\n    >\r\n      {details && role && status && (\r\n        <>\r\n          {intervalChoiceModalIsOpen && (\r\n            <IntervalChoiceModal\r\n              onConfirm={handleIntervalChoiceModalConfirm}\r\n              onCancel={() => setIntervalChoiceModalIsOpen(false)}\r\n              pickerProps={{\r\n                value: eventStart,\r\n                onChange: (value) => setEventStart(value),\r\n                constraints: intervalChoiceConstraints,\r\n              }}\r\n              eventEnd={eventEnd}\r\n            />\r\n          )}\r\n          {visitorAvailabilityConstraints && visitorAvailabilityModalIsOpen && (\r\n            <VisitorAvailabilityModal\r\n              onConfirm={handleVisitorAvailabilityModalConfirm}\r\n              onCancel={() => setVisitorAvailabilityModalIsOpen(false)}\r\n              currentAvailabilities={visitorAvailabilities}\r\n              constraints={visitorAvailabilityConstraints}\r\n              duration={details.duration}\r\n            />\r\n          )}\r\n          {shareModalIsOpen && (\r\n            <ShareModal\r\n              onCopy={() => setShareModalIsOpen(false)}\r\n              onCancel={() => setShareModalIsOpen(false)}\r\n            />\r\n          )}\r\n          {confirmationModalProps && (\r\n            <ConfirmationModal {...confirmationModalProps} isDangerous />\r\n          )}\r\n          <div className={styles['Tiles']}>\r\n            <OrganizedBy\r\n              organizedBy={details.organizedBy}\r\n              isCurrentUser={role === 'organizer'}\r\n            />\r\n            <Location location={details.location} />\r\n            <Duration duration={details.duration} />\r\n            <Status\r\n              chosenInterval={details.chosenInterval}\r\n              role={role}\r\n              status={status}\r\n            />\r\n            <Comment comment={details.comment} />\r\n          </div>\r\n          <div className={styles['Subscriptions']}>\r\n            <InfoTile icon=\"People\" heading=\"Participants\">\r\n              <Scroll axis=\"horizontal\">\r\n                <Subscriptions\r\n                  participants={details.subscriptions}\r\n                  scheduledFor={details.chosenInterval}\r\n                  visitor={{\r\n                    user: account,\r\n                    availability: visitorAvailabilities,\r\n                  }}\r\n                  onUserRemoval={\r\n                    role === 'organizer' && status !== 'past'\r\n                      ? handleUserRemoval\r\n                      : undefined\r\n                  }\r\n                  onIntervalChoice={\r\n                    role === 'organizer' && status === 'notYetScheduled'\r\n                      ? handleIntervalChoice\r\n                      : undefined\r\n                  }\r\n                  onAvailabilityPick={\r\n                    role === 'visitor' && status === 'notYetScheduled'\r\n                      ? handleAvailabilityPick\r\n                      : undefined\r\n                  }\r\n                />\r\n              </Scroll>\r\n            </InfoTile>\r\n          </div>\r\n          <div className={styles['Buttons']}>\r\n            {subscribeButtonIsShown && (\r\n              <Button elementProps={{ onClick: handleSubscribeButtonClick }}>\r\n                Subscribe\r\n              </Button>\r\n            )}\r\n            {clearSelectionButtonIsShown && (\r\n              <Button\r\n                elementProps={{ onClick: handleClearSelectionButtonClick }}\r\n                theme=\"secondary\"\r\n              >\r\n                Clear selected\r\n              </Button>\r\n            )}\r\n            {unsubscribeButtonIsShown && (\r\n              <Button\r\n                theme=\"danger\"\r\n                elementProps={{ onClick: handleUnsubscribeButtonClick }}\r\n              >\r\n                Unsubscribe\r\n              </Button>\r\n            )}\r\n            {deleteButtonIsShown && (\r\n              <Button\r\n                theme=\"danger\"\r\n                elementProps={{ onClick: handleDeleteButtonClick }}\r\n              >\r\n                Delete\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n    </Page>\r\n  );\r\n};\r\n\r\nexport default EventDetails;\r\n","import dayjs from 'dayjs';\r\nimport { IEvent } from 'types/events';\r\nimport { IApiTimeInterval, IEventDetailsResponse } from 'api/types/events';\r\nimport { TimeInterval } from 'types/common';\r\n\r\nexport const convertToTimeInterval = ({\r\n  start,\r\n  end,\r\n}: IApiTimeInterval): TimeInterval => ({\r\n  start: dayjs(start),\r\n  end: dayjs(end),\r\n});\r\n\r\nexport const convertToIEvent = (toConvert: IEventDetailsResponse): IEvent => {\r\n  const {\r\n    subscriptions: subscriptionsRaw,\r\n    chosenInterval: chosenIntervalRaw,\r\n    ...rest\r\n  } = toConvert;\r\n\r\n  const subscriptions = subscriptionsRaw.map(\r\n    ({ user, availability: availabilityRaw }) => {\r\n      const availability = availabilityRaw.map((intervalRaw) =>\r\n        convertToTimeInterval(intervalRaw)\r\n      );\r\n\r\n      return { user, availability };\r\n    }\r\n  );\r\n\r\n  const chosenInterval = chosenIntervalRaw\r\n    ? convertToTimeInterval(chosenIntervalRaw)\r\n    : null;\r\n\r\n  return { subscriptions, chosenInterval, ...rest };\r\n};\r\n","import { DateTimePicker } from '@mui/x-date-pickers';\r\nimport { Dayjs } from 'dayjs';\r\nimport { useState } from 'react';\r\nimport { TimeInterval } from 'types/common';\r\nimport Input from 'ui-kit/Input';\r\n\r\ninterface IProps {\r\n  id?: string;\r\n  value: Dayjs | null;\r\n  onChange: (date: Dayjs | null) => void;\r\n  constraints?: TimeInterval;\r\n}\r\n\r\nconst DatePicker: React.VFC<IProps> = ({\r\n  id,\r\n  value,\r\n  onChange,\r\n  constraints,\r\n}) => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  return (\r\n    <DateTimePicker\r\n      value={value}\r\n      onChange={onChange}\r\n      open={open}\r\n      onOpen={() => setOpen(true)}\r\n      onClose={() => setOpen(false)}\r\n      minDateTime={constraints?.start}\r\n      maxDateTime={constraints?.end}\r\n      renderInput={({ inputRef, inputProps }) => {\r\n        return (\r\n          <Input\r\n            id={id}\r\n            onClick={() => setOpen(true)}\r\n            ref={inputRef}\r\n            {...inputProps}\r\n            readOnly\r\n          />\r\n        );\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default DatePicker;\r\n"],"names":["baseUrl","API_ROOT_PATH","searchEvents","constraints","axios","getEventDetails","id","params","event_id","createEvent","details","subscribeToEvent","intervals","unsubscribeFromEvent","chooseEventInterval","interval","removeUserFromEvent","eventId","userId","user_id","removeEvent","getStatus","chosenInterval","end","isAfter","dayjs","iconsMappedToStatus","notYetScheduled","pending","past","getStatusIcon","status","getUserRole","event","account","organizedBy","subscriptions","some","entry","user","ALL_PARTICIPANTS_ID","SCHEDULED_FOR_ID","getConstraintText","constraint","isSmall","size","Text","format","DATE_SHORT","TIME_DEFAULT","cn","classNames","styles","column","rows","isCurrentUser","isAllParticipants","isScheduledFor","onIntervalChoice","useState","isPicked","setIsPicked","start","min","minToMaxDuration","diff","beforePercent","durationPercent","className","Root_picked","Root_color_participant","Root_color_currentUser","Root_color_allParticipants","Root_color_scheduledFor","style","left","width","onMouseEnter","onMouseLeave","IconButton","icon","elementProps","onClick","Details_shown","RangeHighlight_shown","top","current","height","total","isCurrent","isOrganizer","onRemoval","removalButtonIsShown","displayName","getDisplayName","title","font","color","clamp","participants","scheduledFor","visitor","onUserRemoval","onAvailabilityPick","useAppSelector","store","withIntersections","withVisitor","availability","length","intersections","map","subscription","reduce","foundIntersections","intervalsToCheck","flatMap","previous","newIntersection","getIntersection","name","email","addIntersections","list","addScheduledFor","userIndex","columnIndex","max","flexGrow","rowIndex","filter","isSameOrAfter","isSameOrBefore","intervalIndex","action","onConfirm","onCancel","isDangerous","Modal","onOkClick","okProps","theme","undefined","onCancelClick","convertToIApiTimeInterval","DATETIME_DEFAULT","comment","InfoTile","heading","totalMinutes","duration","hours","Math","floor","asHours","minutes","pickerProps","eventEnd","Form","defaultPreventedOnSubmission","layout","label","isRequired","DatePicker","Input","placeholder","DATETIME_PICKER","disabled","location","Separator","onCopy","eventUrl","window","href","navigator","clipboard","writeText","okText","value","getStatusInfo","primary","secondary","notYetScheduledByRole","organizer","subscriber","role","info","fromNow","startIsBeforeEnd","notShorterThan","noIntersections","currentAvailabilities","lastPickedInterval","at","afterPreviousPick","add","isBetween","getInitialStart","setStart","setEnd","pickedInterval","validationattributes","errors","validate","getValidationConstraints","ErrorDisplay","isShown","Boolean","errorMessage","onChange","notFoundPageConfig","message","returnUrl","PRIVATE","returnButtonText","navigateBackTo","dispatch","useAppDispatch","navigate","useNavigate","useParams","setDetails","isLoading","setIsLoading","intervalChoiceModalIsOpen","setIntervalChoiceModalIsOpen","intervalChoiceConstraints","setIntervalChoiceConstraints","eventStart","setEventStart","visitorAvailabilityModalIsOpen","setVisitorAvailabilityModalIsOpen","visitorAvailabilityConstraints","setVisitorAvailabilityConstraints","visitorAvailabilities","setVisitorAvailabilities","shareModalIsOpen","setShareModalIsOpen","confirmationModalProps","setConfirmationModalProps","fetchDetails","useCallback","response","parsed","convertToIEvent","data","state","useEffect","handleDeleteConfirmation","notifyOnNetworkError","removeUser","handleIntervalChoiceModalConfirm","handleUnsubscribeConfirmation","handleSubscribeButtonClick","availableAt","subscribeButtonIsShown","clearSelectionButtonIsShown","unsubscribeButtonIsShown","deleteButtonIsShown","Page","headerAddon","Button","leftIcon","availabile","Scroll","axis","subtract","constrains","convertToTimeInterval","toConvert","subscriptionsRaw","chosenIntervalRaw","rest","intervalRaw","open","setOpen","DateTimePicker","onOpen","onClose","minDateTime","maxDateTime","renderInput","inputRef","inputProps","ref","readOnly"],"sourceRoot":""}