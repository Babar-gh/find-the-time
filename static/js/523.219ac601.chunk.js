"use strict";(self.webpackChunkfind_the_time_private=self.webpackChunkfind_the_time_private||[]).push([[523],{3077:function(n,e,t){t.d(e,{gT:function(){return s},Lj:function(){return c},yM:function(){return u},oc:function(){return l},mZ:function(){return d},QM:function(){return v},XM:function(){return f},xC:function(){return h}});var r=t(4569),i=t.n(r),o=t(6712),a="".concat(o.N,"/events"),s=function(n){return i().post("".concat(a),n)},c=function(n){return i().get("".concat(a),{params:{event_id:n}})},u=function(n){return i().post("".concat(a,"/new"),n)},l=function(n,e){return i().post("".concat(a,"/subscribe"),e,{params:{event_id:n}})},d=function(n){return i().post("".concat(a,"/unsubscribe"),{},{params:{event_id:n}})},v=function(n,e){return i().post("".concat(a,"/choose-interval"),e,{params:{event_id:n}})},f=function(n,e){return i().post("".concat(a,"/remove-subscription"),{},{params:{event_id:n,user_id:e}})},h=function(n){return i().post("".concat(a,"/remove"),{},{params:{event_id:n}})}},2048:function(n,e,t){t.d(e,{lR:function(){return o},XO:function(){return s},Rg:function(){return c}});var r=t(7892),i=t.n(r),o=function(n){return null===n?"notYetScheduled":n.end.isAfter(i()())?"pending":"past"},a={notYetScheduled:"EditCalendar",pending:"Event",past:"EventAvailable"},s=function(n){return a[n]},c=function(n,e){return n.organizedBy.id===e.id?"organizer":n.subscriptions.some((function(n){return n.user.id===e.id}))?"subscriber":"visitor"}},1523:function(n,e,t){t.r(e),t.d(e,{default:function(){return Cn}});var r=t(1413),i=t(3433),o=t(5861),a=t(9439),s=t(7757),c=t.n(s),u=t(6871),l=t(2791),d=t(7993),v=t(9331),f=t(753),h=t(1290),p=t(6579),m=t(9448),_=t.n(m),x=t(7838),Z=t(1049),j=t(4499),C="ALL_PARTICIPANTS",b="SCHEDULED_FOR",g=t(184),S=function(n,e){var t=e?"small":"regular";return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x.Z,{size:t,children:n.format(Z.dE)}),(0,g.jsx)(x.Z,{size:t,children:n.format(Z.be)})]})},k={Root:"Interval_Root__8spB2",Root_color_participant:"Interval_Root_color_participant__YTabp",Root_color_currentUser:"Interval_Root_color_currentUser__4G+OQ",Root_color_allParticipants:"Interval_Root_color_allParticipants__SaxRf",Root_color_scheduledFor:"Interval_Root_color_scheduledFor__fFl8T",Root_picked:"Interval_Root_picked__w1UZ9",Details:"Interval_Details__VpV7A",Details_shown:"Interval_Details_shown__p66xr",Start:"Interval_Start__MHPim",End:"Interval_End__cbWfa",RangeHighlight:"Interval_RangeHighlight__BmQlk",RangeHighlight_shown:"Interval_RangeHighlight_shown__GgXMU",IntervalChoiceButtonContainer:"Interval_IntervalChoiceButtonContainer__Tfka+"},y=_().bind(k),I=function(n){var e=n.interval,t=n.column,r=n.rows,i=n.isCurrentUser,o=n.isAllParticipants,s=n.isScheduledFor,c=n.onIntervalChoice,u=(0,l.useState)(!1),d=(0,a.Z)(u,2),v=d[0],f=d[1],p=e.start,m=e.end,_=t.start,x=t.end.diff(_),Z=p.diff(_)/x*100,j=m.diff(p)/x*100;return(0,g.jsxs)("div",{className:y("Root",{Root_picked:v,Root_color_participant:!i&&!o&&!s,Root_color_currentUser:i,Root_color_allParticipants:o,Root_color_scheduledFor:s}),style:{left:"".concat(Z,"%"),width:"".concat(j,"%")},onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)},children:[o&&c&&(0,g.jsx)("div",{className:k.IntervalChoiceButtonContainer,children:(0,g.jsx)(h.Z,{icon:"EditCalendar",elementProps:{onClick:function(){return c(e)}}})}),(0,g.jsxs)("div",{className:y("Details",{Details_shown:v}),children:[(0,g.jsx)("div",{className:k.Start,children:S(p,!0)}),(0,g.jsx)("div",{className:k.End,children:S(m,!0)})]}),(0,g.jsx)("div",{className:y("RangeHighlight",{RangeHighlight_shown:v}),style:{top:"-".concat(58*(r.current+1),"px"),height:"".concat(58*(r.total+1),"px")}})]})},R="Subscriptions_Root__S+z23",w="Subscriptions_UserList__95xQC",P="Subscriptions_IntervalList__8+5JC",E="Subscriptions_Min__8hfhR",N="Subscriptions_Max__7CaG8",A="Subscriptions_IntervalHeader__o8Vlp",M="Subscriptions_UserIntervals__Ip4R9",B="Subscriptions_AvailabilityPickButtonContainer__AP4+t",D=t(2189),T="User_Root__976IA",Y="User_Name__51agT",z=function(n){var e=n.user,t=n.isCurrent,r=n.isOrganizer,i=n.isAllParticipants,o=n.isScheduledFor,a=n.onRemoval,s=a&&!r&&!i&&!o,c=(0,D.G)(e);return(0,g.jsxs)("div",{className:T,children:[(0,g.jsx)("p",{className:Y,title:c,children:(0,g.jsx)(x.Z,{font:t?"primaryBold":"primary",color:t?"secondary":"primary",clamp:1,children:c})}),s&&(0,g.jsx)(h.Z,{icon:"Close",elementProps:{onClick:function(){return a(e)}}})]})},U=function(n){var e=n.participants,t=n.scheduledFor,r=n.visitor,o=n.onUserRemoval,a=n.onIntervalChoice,s=n.onAvailabilityPick,c=(0,p.C)((function(n){return n.account})),u=function(n,e){var t=null!==e&&void 0!==e&&e.availability.length?[].concat((0,i.Z)(n),[e]):n,r=t.map((function(n){return n.availability})).reduce((function(n,e){return e.flatMap((function(e){return n.flatMap((function(n){var t=(0,j.E)(n,e);return null!==t?[t]:[]}))}))}));return[].concat((0,i.Z)(t),[{user:{name:"All participants",email:"",id:C},availability:r}])}(e,r),l=function(n,e){return e?[].concat((0,i.Z)(n),[{user:{name:"Scheduled for",email:"",id:b},availability:[e]}]):n}(u,t);return(0,g.jsxs)("div",{className:R,children:[(0,g.jsx)("div",{className:w,children:l.map((function(n,e){var t=n.user;return(0,g.jsx)(z,{user:t,isCurrent:t.id===c.id,isOrganizer:t.id===l[0].user.id,isAllParticipants:t.id===C,isScheduledFor:t.id===b,onRemoval:o},e)}))}),l[0].availability.map((function(n,e){var t=n.start,r=n.end;return(0,g.jsxs)("div",{className:P,style:{flexGrow:r.diff(t,"minutes")},children:[(0,g.jsxs)("div",{className:A,children:[(0,g.jsx)("div",{className:E,children:S(t)}),(0,g.jsx)("div",{className:N,children:S(r)})]}),l.map((function(n,e){var i=n.availability,o=n.user;return(0,g.jsx)("div",{className:M,children:i.filter((function(n){var e=n.start,i=n.end;return e.isSameOrAfter(t)&&i.isSameOrBefore(r)})).map((function(n,i){return(0,g.jsx)(I,{interval:n,column:{start:t,end:r},rows:{current:e,total:l.length},isCurrentUser:o.id===c.id,isAllParticipants:o.id===C,isScheduledFor:o.id===b,onIntervalChoice:a},i)}))},e)})),s&&(0,g.jsx)("div",{className:B,children:(0,g.jsx)(h.Z,{icon:"Add",elementProps:{onClick:function(){return s({start:t,end:r})}}})})]},e)}))]})},O=t(2048),F=t(3527),H=t(5469),L=t(3077),G=t(5249),Q=function(n){var e=n.title,t=void 0===e?"Confirm Action":e,r=n.action,i=n.onConfirm,o=n.onCancel,a=n.isDangerous,s=void 0!==a&&a;return(0,g.jsx)(G.Z,{title:t,onOkClick:i,okProps:s?{theme:"danger"}:void 0,onCancelClick:o,children:(0,g.jsxs)(x.Z,{children:["You are about to ",r,". Do you want to proceed?"]})})},W=t(8586),X=t(7707),V=function(n){var e=n.start,t=n.end;return{start:e.format(Z.Zn),end:t.format(Z.Zn)}},q=function(n){var e=n.comment;return(0,g.jsx)(W.Z,{heading:"Comment",icon:"Description",children:""===e?(0,g.jsx)(x.Z,{font:"primaryItalic",children:"No additional info provided"}):(0,g.jsx)(x.Z,{children:e})})},J=t(7892),K=t.n(J),$=function(n){var e=n.duration,t=K().duration(e,"minutes"),r=Math.floor(t.asHours()),i=t.minutes();return(0,g.jsxs)(W.Z,{heading:"Duration",icon:"Timelapse",children:[r>0&&(0,g.jsx)(x.Z,{children:"".concat(r," hours ")}),(0,g.jsx)(x.Z,{children:"".concat(i," minutes")})]})},nn=t(2261),en=t(6117),tn=t(7508),rn=function(n){var e=n.onConfirm,t=n.onCancel,i=n.pickerProps,o=n.eventEnd;return(0,g.jsx)(G.Z,{title:"Choose When Event Happens",onOkClick:e,onCancelClick:t,children:(0,g.jsx)(en.Z,{defaultPreventedOnSubmission:!0,layout:"responsive",children:(0,g.jsxs)(en.Z.Column,{children:[(0,g.jsx)(en.Z.Item,{id:"start",label:"Start",isRequired:!0,children:(0,g.jsx)(nn.Z,(0,r.Z)({},i))}),(0,g.jsx)(en.Z.Item,{id:"end",label:"End",children:(0,g.jsx)(tn.Z,{placeholder:null===o||void 0===o?void 0:o.format(Z.VA),disabled:!0})})]})})})},on=function(n){var e=n.location;return(0,g.jsx)(W.Z,{heading:"Location",icon:"LocationOn",children:(0,g.jsx)(x.Z,{children:e})})},an=t(4833),sn=function(n){var e=n.organizedBy,t=n.isCurrentUser;return(0,g.jsxs)(W.Z,{heading:"Organized By",icon:"Person",children:[(0,g.jsx)(x.Z,{children:(0,D.G)(e)}),t&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(an.Z,{}),(0,g.jsx)(x.Z,{font:"primaryItalic",size:"small",children:"That's you!"})]})]})},cn=function(n){var e=n.onCopy,t=n.onCancel,r=window.location.href;return(0,g.jsx)(G.Z,{title:"Invite Participants",onOkClick:function(){navigator.clipboard.writeText(r),e()},okText:"Copy",onCancelClick:t,children:(0,g.jsx)(tn.Z,{icon:"Share",value:r})})},un=function(n,e){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x.Z,{children:n}),(0,g.jsx)(an.Z,{}),(0,g.jsx)(x.Z,{font:"primaryItalic",size:"small",children:e})]})},ln={organizer:"You can pick the time when everyone is subscribed!",subscriber:"The organizer will pick the time when everyone is subscribed!",visitor:"You can subscribe!"},dn=function(n){var e=n.chosenInterval,t=n.role,r=n.status,i={notYetScheduled:un("Not scheduled yet",ln[t]),pending:un("Scheduled for ".concat(null===e||void 0===e?void 0:e.start.format("MMM D, YYYY")),"Will start at ".concat(null===e||void 0===e?void 0:e.start.format("HH:mm"))),past:un("Was scheduled for ".concat(null===e||void 0===e?void 0:e.start.format("MMM D, YYYY")),"Ended ".concat(null===e||void 0===e?void 0:e.end.fromNow()))};return(0,g.jsx)(W.Z,{heading:"Status",icon:(0,O.XO)(r),children:i[r]})},vn="EventDetails_Tiles__pcM-6",fn="EventDetails_Subscriptions__Qb-TF",hn="EventDetails_Buttons__j+QAp",pn=t(7762),mn=t.n(pn),_n=t(2774),xn=function(n){return{start:{startIsBeforeEnd:!0},end:{notShorterThan:{duration:n}},intervals:{noIntersections:!0}}},Zn=function(n){var e=n.onConfirm,t=n.onCancel,r=n.constraints,o=n.currentAvailabilities,s=n.duration,c=(0,l.useState)(function(n,e){var t=e.at(-1);if(!t)return n.start;var r=t.end.add(1,"hour");return r.isBetween(n.start,n.end)?r:n.start}(r,o)),u=(0,a.Z)(c,2),d=u[0],v=u[1],f=(0,l.useState)(r.end),h=(0,a.Z)(f,2),p=h[0],m=h[1],_=d&&p?{start:d,end:p}:null,x={start:_,end:_,intervals:[].concat((0,i.Z)(o),[_])},Z=_?mn()(x,xn(s)):void 0;return(0,g.jsxs)(G.Z,{title:"Choose When You're Available",onOkClick:function(){_&&!Z&&e(_)},onCancelClick:t,children:[(0,g.jsx)(_n.Z,{isShown:Boolean(null===Z||void 0===Z?void 0:Z.intervals),children:(null===Z||void 0===Z?void 0:Z.intervals)||""}),(0,g.jsx)(en.Z,{defaultPreventedOnSubmission:!0,layout:"responsive",children:(0,g.jsxs)(en.Z.Column,{children:[(0,g.jsx)(en.Z.Item,{id:"start",label:"Start",errorMessage:null===Z||void 0===Z?void 0:Z.start,isRequired:!0,children:(0,g.jsx)(nn.Z,{value:d,onChange:v,constraints:r})}),(0,g.jsx)(en.Z.Item,{id:"end",label:"End",errorMessage:null===Z||void 0===Z?void 0:Z.end,isRequired:!0,children:(0,g.jsx)(nn.Z,{value:p,onChange:m,constraints:r})})]})})]})},jn={title:"Event Not Found",message:"We couldn\u2019t find this event. Sorry about that.",returnUrl:F.Su.Events,returnButtonText:"Go to events"},Cn=function(n){var e=n.navigateBackTo,t=(0,p.T)(),s=(0,u.s0)(),h=(0,u.UO)().eventId,m=(0,l.useState)(),_=(0,a.Z)(m,2),x=_[0],j=_[1],C=(0,l.useState)(),b=(0,a.Z)(C,2),S=b[0],k=b[1],y=(0,l.useState)(!1),I=(0,a.Z)(y,2),R=I[0],w=I[1],P=(0,l.useState)(),E=(0,a.Z)(P,2),N=E[0],A=E[1],M=(0,l.useState)(null),B=(0,a.Z)(M,2),D=B[0],T=B[1],Y=x&&D?D.add(x.duration,"minutes"):null,z=(0,l.useState)(!1),G=(0,a.Z)(z,2),J=G[0],K=G[1],nn=(0,l.useState)(),en=(0,a.Z)(nn,2),tn=en[0],an=en[1],un=(0,l.useState)([]),ln=(0,a.Z)(un,2),pn=ln[0],mn=ln[1],_n=(0,l.useState)(!1),xn=(0,a.Z)(_n,2),Cn=xn[0],bn=xn[1],gn=(0,l.useState)(null),Sn=(0,a.Z)(gn,2),kn=Sn[0],yn=Sn[1],In=(0,p.C)((function(n){return n.account})),Rn=x?(0,O.Rg)(x,In):null,wn=x?(0,O.lR)(null===x||void 0===x?void 0:x.chosenInterval):null,Pn=(0,l.useCallback)((0,o.Z)(c().mark((function n(){var e,t;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return k(!0),n.prev=1,n.next=4,(0,L.Lj)(h);case 4:e=n.sent,t=(0,X.n)(e.data),j(t),k(!1),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),k(!1),s(F.Su.NotFound,{state:jn});case 14:case"end":return n.stop()}}),n,null,[[1,10]])}))),[h,s]);(0,l.useEffect)((function(){Pn()}),[Pn]);var En=function(){var n=(0,o.Z)(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return yn(null),k(!0),n.prev=2,n.next=5,(0,L.xC)(h);case 5:k(!1),s(F.Su.Events),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(2),k(!1),t((0,H.H_)("delete the event",n.t0));case 13:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(){return n.apply(this,arguments)}}(),Nn=function(){var n=(0,o.Z)(c().mark((function n(e){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return yn(null),k(!0),n.prev=2,n.next=5,(0,L.XM)(h,e.id);case 5:Pn(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),t((0,H.H_)("remove this user",n.t0));case 11:return n.prev=11,k(!1),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[2,8,11,14]])})));return function(e){return n.apply(this,arguments)}}(),An=function(){var n=(0,o.Z)(c().mark((function n(){var e;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(D&&Y){n.next=2;break}return n.abrupt("return");case 2:return e={start:D.format(Z.Zn),end:Y.format(Z.Zn)},k(!0),n.prev=4,n.next=7,(0,L.QM)(h,{chosenInterval:e});case 7:w(!1),Pn(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(4),t((0,H.H_)("schedule the event",n.t0));case 14:return n.prev=14,k(!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[4,11,14,17]])})));return function(){return n.apply(this,arguments)}}(),Mn=function(){var n=(0,o.Z)(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return yn(null),k(!0),n.prev=2,n.next=5,(0,L.mZ)(h);case 5:Pn(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),t((0,H.H_)("unsubscribe you",n.t0));case 11:return n.prev=11,k(!1),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[2,8,11,14]])})));return function(){return n.apply(this,arguments)}}(),Bn=function(){var n=(0,o.Z)(c().mark((function n(){var e;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=pn.map((function(n){return V(n)})),k(!0),n.prev=2,n.next=5,(0,L.oc)(h,{availableAt:e});case 5:mn([]),Pn(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),t((0,H.H_)("subscribe you",n.t0));case 12:return n.prev=12,k(!1),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[2,9,12,15]])})));return function(){return n.apply(this,arguments)}}(),Dn="visitor"===Rn&&"notYetScheduled"===wn&&Boolean(pn.length),Tn=Dn,Yn="subscriber"===Rn&&"notYetScheduled"===wn,zn="organizer"===Rn&&"notYetScheduled"===wn;return(0,g.jsx)(v.Z,{title:(null===x||void 0===x?void 0:x.title)||"",isLoading:S,navigateBackTo:e,headerAddon:(0,g.jsx)(d.Z,{leftIcon:"Share",elementProps:{onClick:function(){return bn(!0)}},children:"Share"}),children:x&&Rn&&wn&&(0,g.jsxs)(g.Fragment,{children:[R&&(0,g.jsx)(rn,{onConfirm:An,onCancel:function(){return w(!1)},pickerProps:{value:D,onChange:function(n){return T(n)},constraints:N},eventEnd:Y}),tn&&J&&(0,g.jsx)(Zn,{onConfirm:function(n){K(!1),mn((function(e){return[].concat((0,i.Z)(e),[n])}))},onCancel:function(){return K(!1)},currentAvailabilities:pn,constraints:tn,duration:x.duration}),Cn&&(0,g.jsx)(cn,{onCopy:function(){return bn(!1)},onCancel:function(){return bn(!1)}}),kn&&(0,g.jsx)(Q,(0,r.Z)((0,r.Z)({},kn),{},{isDangerous:!0})),(0,g.jsxs)("div",{className:vn,children:[(0,g.jsx)(sn,{organizedBy:x.organizedBy,isCurrentUser:"organizer"===Rn}),(0,g.jsx)(on,{location:x.location}),(0,g.jsx)($,{duration:x.duration}),(0,g.jsx)(dn,{chosenInterval:x.chosenInterval,role:Rn,status:wn}),(0,g.jsx)(q,{comment:x.comment})]}),(0,g.jsx)("div",{className:fn,children:(0,g.jsx)(W.Z,{icon:"People",heading:"Participants",children:(0,g.jsx)(f.Z,{axis:"horizontal",children:(0,g.jsx)(U,{participants:x.subscriptions,scheduledFor:x.chosenInterval,visitor:{user:In,availability:pn},onUserRemoval:"organizer"===Rn&&"past"!==wn?function(n){return yn({title:"Remove Participant",action:"remove this user from participation in the event",onConfirm:function(){return Nn(n)},onCancel:function(){return yn(null)}})}:void 0,onIntervalChoice:"organizer"===Rn&&"notYetScheduled"===wn?function(n){var e=n.start,t=n.end;if(x){var r={start:e,end:t.subtract(x.duration,"minutes")};A(r),T(r.start),w(!0)}}:void 0,onAvailabilityPick:"visitor"===Rn&&"notYetScheduled"===wn?function(n){an(n),K(!0)}:void 0})})})}),(0,g.jsxs)("div",{className:hn,children:[Dn&&(0,g.jsx)(d.Z,{elementProps:{onClick:Bn},children:"Subscribe"}),Tn&&(0,g.jsx)(d.Z,{elementProps:{onClick:function(){mn([])}},theme:"secondary",children:"Clear selected"}),Yn&&(0,g.jsx)(d.Z,{theme:"danger",elementProps:{onClick:function(){return yn({title:"Unsubscribe",action:"revoke your participation in this event",onConfirm:Mn,onCancel:function(){return yn(null)}})}},children:"Unsubscribe"}),zn&&(0,g.jsx)(d.Z,{theme:"danger",elementProps:{onClick:function(){return yn({title:"Remove Event",action:"remove this event",onConfirm:En,onCancel:function(){return yn(null)}})}},children:"Delete"})]})]})})}},7707:function(n,e,t){t.d(e,{c:function(){return c},n:function(){return u}});var r=t(1413),i=t(5987),o=t(7892),a=t.n(o),s=["subscriptions","chosenInterval"],c=function(n){var e=n.start,t=n.end;return{start:a()(e),end:a()(t)}},u=function(n){var e=n.subscriptions,t=n.chosenInterval,o=(0,i.Z)(n,s),a=e.map((function(n){return{user:n.user,availability:n.availability.map((function(n){return c(n)}))}})),u=t?c(t):null;return(0,r.Z)({subscriptions:a,chosenInterval:u},o)}},2261:function(n,e,t){t.d(e,{Z:function(){return u}});var r=t(1413),i=t(9439),o=t(3853),a=t(2791),s=t(7508),c=t(184),u=function(n){var e=n.id,t=n.value,u=n.onChange,l=n.constraints,d=(0,a.useState)(!1),v=(0,i.Z)(d,2),f=v[0],h=v[1];return(0,c.jsx)(o.x,{value:t,onChange:u,open:f,onOpen:function(){return h(!0)},onClose:function(){return h(!1)},minDateTime:null===l||void 0===l?void 0:l.start,maxDateTime:null===l||void 0===l?void 0:l.end,renderInput:function(n){var t=n.inputRef,i=n.inputProps;return(0,c.jsx)(s.Z,(0,r.Z)((0,r.Z)({id:e,onClick:function(){return h(!0)},ref:t},i),{},{readOnly:!0}))}})}}}]);
//# sourceMappingURL=523.219ac601.chunk.js.map